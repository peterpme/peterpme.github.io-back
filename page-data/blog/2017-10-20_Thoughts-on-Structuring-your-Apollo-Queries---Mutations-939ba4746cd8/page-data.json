{"componentChunkName":"component---src-templates-blog-post-js","path":"/blog/2017-10-20_Thoughts-on-Structuring-your-Apollo-Queries---Mutations-939ba4746cd8/","webpackCompilationHash":"f146ed55f93bb0a77a00","result":{"data":{"site":{"siteMetadata":{"title":"Peter Piekarczyk","author":"@peterpme"}},"markdownRemark":{"id":"94b81566-8f09-5aad-a53c-35f43a453243","excerpt":"Photo by [Patryk GrÄ…dys](https://unsplash.com/photos/4pPzKfd6BEg?utm_source=unsplash&utm_medium=referral&utm_contentâ€¦","html":"<p><img src=\"https://cdn-images-1.medium.com/max/800/1*X3AZL38e8zWBeXpZXxW0lQ.jpeg\" alt=\"Photo by [Patryk GrÄ…dys](https://unsplash.com/photos/4pPzKfd6BEg?utm_source=unsplash&#x26;utm_medium=referral&#x26;utm_content=creditCopyText) onÂ [Unsplash](https://unsplash.com/?utm_source=unsplash&#x26;utm_medium=referral&#x26;utm_content=creditCopyText)\">\nPhoto by <a href=\"https://unsplash.com/photos/4pPzKfd6BEg?utm_source=unsplash&#x26;utm_medium=referral&#x26;utm_content=creditCopyText\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Patryk GrÄ…dys</a> onÂ <a href=\"https://unsplash.com/?utm_source=unsplash&#x26;utm_medium=referral&#x26;utm_content=creditCopyText\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Unsplash</a></p>\n<blockquote>\n<p><a href=\"https://open.spotify.com/track/3Dfy5u28HChURIwcCL4Rto\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Rezz - Synthesia on Spotify</a>:\nThis is what I listen to when I code. I wrote this article while listening to the entire album. Listen at your own risk <em>ðŸ˜ƒ</em></p>\n</blockquote>\n<p>After using Apollo for the last few months, Iâ€™ve picked up some great patterns weâ€™ve adopted at <a href=\"https://www.orchard.ai\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Orchard</a>, where weâ€™ve re-implemented an experience for our beta testers just about every week</p>\n<blockquote>\n<p>The faster we can build something, the sooner we can get feedback from our beta testers and the better chance we have of building an amazing product.</p>\n</blockquote>\n<h4 id=\"folder-structure\"><a href=\"#folder-structure\" aria-label=\"folder structure permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><strong>Folder Structure:</strong></h4>\n<p>I donâ€™t inline my queries. Maybe Iâ€™m cray cray, but I strongly believe in being able to search and reuse something as quickly as possible. <a href=\"https://github.com/ggreer/the_silver_searcher\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">ag</a>, <a href=\"https://github.com/junegunn/fzf\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">fzf</a>, <a href=\"https://www.alfredapp.com/workflows/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Alfred Workflows</a> and <a href=\"https://nuclide.io/docs/features/quick-open/#code-search\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Nuclide search</a> are my best friends IRL. I try to be as descriptive as possible, even if that means a 40 character filename.</p>\n<h4 id=\"heres-what-that-folder-structure-looks-like\"><a href=\"#heres-what-that-folder-structure-looks-like\" aria-label=\"heres what that folder structure looks like permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Hereâ€™s what that folder structure looksÂ like:</h4>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">/containers\n/components\n/utilities\n/modals\n/graphql\n/queries\n/mutations</code></pre></div>\n<p>I typically like to keep my folder structure flat. Iâ€™m ok with nesting GraphQL because Iâ€™ve realized over time that I can figure out if something is a query or a mutation without appending <code class=\"language-text\">mutation</code> or <code class=\"language-text\">query</code> to the end of the file.</p>\n<h4 id=\"naming-conventions\"><a href=\"#naming-conventions\" aria-label=\"naming conventions permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Naming Conventions:</h4>\n<p>Mutations will always start with an action:</p>\n<ul>\n<li><code class=\"language-text\">saveUserPushToken</code></li>\n<li><code class=\"language-text\">updateOnboardingProfile</code></li>\n<li><code class=\"language-text\">createUser</code></li>\n</ul>\n<p>Queries just describe what Iâ€™m looking for:</p>\n<ul>\n<li><code class=\"language-text\">userProfile</code></li>\n<li><code class=\"language-text\">userConnections</code></li>\n<li><code class=\"language-text\">reminders</code></li>\n</ul>\n<p>Sometimes theyâ€™ll even look like this:</p>\n<ul>\n<li><code class=\"language-text\">remindersWithNewFeatureOfSomeKind</code></li>\n<li><code class=\"language-text\">userProfileWithUserSettings</code></li>\n<li><code class=\"language-text\">userPrioritiesWithRemindersAtTheTop</code></li>\n</ul>\n<p>I donâ€™t prefix them with anything because I already know they live under the <code class=\"language-text\">queries</code> folder no matter what I do. Besides, prefixing them with something like <code class=\"language-text\">get</code> may make it seem like an API action. Also, I tried it and didnâ€™t like it.</p>\n<h4 id=\"file-structure\"><a href=\"#file-structure\" aria-label=\"file structure permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>File Structure:</h4>\n<p>I donâ€™t like to keep them in the same file either because I literally spend more time scrolling than I do typing! What does each file look like? The way youâ€™d expect:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> gql <span class=\"token keyword\">from</span> <span class=\"token string\">\"graphql-tag\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> updateUsername <span class=\"token operator\">=</span> gql<span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n  mutation UpdateUsername($id: ID!, $username: String!) {\n    updateUsername(id: $id, username: $username) {\n      id\n    }\n  }\n</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> updateUsername<span class=\"token punctuation\">;</span></code></pre></div>\n<p><code class=\"language-text\">updateUserProfile</code> will have its own file too!</p>\n<p>This way no matter what, I can continue to move quickly, implement our new features from design and have an exact description of what each and every file is doing.</p>\n<h3 id=\"final-thoughts\"><a href=\"#final-thoughts\" aria-label=\"final thoughts permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Final Thoughts</h3>\n<p>Iâ€™ve fallen in love with this setup for my queries and mutations. Iâ€™ve rewritten our mutations and queries ~50 times and havenâ€™t like Iâ€™ve been going against the grain yet.</p>\n<p>That being said, this folder / file structure is not for everyone. Consult with your manager and co-worker and make sure that this folder structure is right for you.</p>\n<p>Side effects include yelling at me online so donâ€™t yell at me!</p>\n<p>If you have a better way, Iâ€™m always open to new ideas: <a href=\"https://www.twitter.com/peterpme\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Hit me up on Twitter</a></p>\n<p>Ciao!</p>","timeToRead":3,"fields":{"slug":"blog/2017-10-20_Thoughts-on-Structuring-your-Apollo-Queries---Mutations-939ba4746cd8/"},"frontmatter":{"title":"Thoughts on Structuring your Apollo Queries & Mutations","date":"October 20, 2017","description":null}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"blog/2017-10-20_Thoughts-on-Structuring-your-Apollo-Queries---Mutations-939ba4746cd8/","previous":{"fields":{"slug":"blog/2017-10-10_Apollo-Tote--Declarative-Patterns-and-a-Sneak-Peek-into-Apollo-2-0-f23bd884943e/"},"frontmatter":{"title":"Apollo Tote, Declarative Patterns and a Sneak Peek into Apollo 2.0"}},"next":{"fields":{"slug":"blog/2017-12-28_Command-Line-Tip--Lowercase-all-file-names-in-a-given-directory-271b91ed0802/"},"frontmatter":{"title":"Command Line Tip: Lowercase all file names in a given directory"}}}}}