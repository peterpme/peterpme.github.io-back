<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.d74fe167678b0a61c190.css">code[class*=language-]{color:var(--gray-medium);background:none;text-shadow:0 1px rgba(0,0,0,.3);font-family:Fira Code,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}:not(pre)>code[class*=language-]{background:#161130;padding:.2em;border-radius:.3em;white-space:normal}

/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}main{display:block}h1{font-size:2em;margin:.67em 0}a{background-color:transparent}strong{font-weight:bolder}code{font-family:monospace,monospace;font-size:1em}small{font-size:80%}img{border-style:none}button,input{font-family:inherit;font-size:100%;line-height:1.15;margin:0;overflow:visible}button{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}legend{color:inherit;display:table;max-width:100%;white-space:normal}[type=checkbox],[type=radio],legend{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}[hidden]{display:none}html{box-sizing:border-box;font-family:sans-serif}*,:after,:before{box-sizing:inherit}h1,h2,p{margin:0}button{background:transparent;padding:0}button:focus{outline:1px dotted;outline:5px auto -webkit-focus-ring-color}ul{list-style:none;margin:0;padding:0}html{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;line-height:1.5}*,:after,:before{border:0 solid #e2e8f0}img{border-style:solid}input::-webkit-input-placeholder{color:#a0aec0}input::-moz-placeholder{color:#a0aec0}input:-ms-input-placeholder{color:#a0aec0}input::-ms-input-placeholder{color:#a0aec0}input::placeholder{color:#a0aec0}[role=button],button{cursor:pointer}h1,h2{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}button,input{padding:0;line-height:inherit;color:inherit}code{font-family:Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace}canvas,img,object,svg{display:block;vertical-align:middle}img{max-width:100%;height:auto}.bg-purple-900{background-color:#06061e}.bg-no-repeat{background-repeat:no-repeat}.bg-cover{background-size:cover}.border-gray-600{border-color:#718096}.rounded-full{border-radius:9999px}.border-b-2{border-bottom-width:2px}.block{display:block}.flex{display:flex}.flex-col{flex-direction:column}.items-start{align-items:flex-start}.justify-center{justify-content:center}.flex-shrink-0{flex-shrink:0}.font-bold{font-weight:700}.h-5{height:1.25rem}.h-24{height:6rem}.h-screen{height:100vh}.leading-tight{line-height:1.25}.leading-normal{line-height:1.5}.leading-relaxed{line-height:1.625}.list-none{list-style-type:none}.mx-auto{margin-left:auto;margin-right:auto}.mb-0{margin-bottom:0}.mb-1{margin-bottom:.25rem}.mt-2{margin-top:.5rem}.mb-3{margin-bottom:.75rem}.mt-4{margin-top:1rem}.mb-4{margin-bottom:1rem}.ml-6{margin-left:1.5rem}.max-w-2xl{max-width:42rem}.min-h-screen{min-height:100vh}.p-0{padding:0}.p-4{padding:1rem}.py-6{padding-top:1.5rem;padding-bottom:1.5rem}.px-6{padding-left:1.5rem;padding-right:1.5rem}.pb-0{padding-bottom:0}.pt-2{padding-top:.5rem}.pb-2{padding-bottom:.5rem}.pt-3{padding-top:.75rem}.pr-3{padding-right:.75rem}.pb-3{padding-bottom:.75rem}.fixed{position:fixed}.top-0{top:0}.right-0{right:0}.bottom-0{bottom:0}.text-white{color:#fff}.text-gray-200{color:#edf2f7}.text-gray-500{color:#a0aec0}.text-2xl{font-size:1.5rem}.text-3xl{font-size:1.875rem}.visible{visibility:visible}.w-5{width:1.25rem}.w-24{width:6rem}.w-3\/5{width:60%}.z-10{z-index:10}@media (min-width:400px){.bg{z-index:-1;background-image:url(https://source.unsplash.com/ZrCLoDQTFUI/900x1000)}}.markdown{line-height:1.625;font-size:1.125rem}.markdown h1,.markdown h2{font-size:1.5rem;margin-top:1.5rem;margin-bottom:1.5rem;font-weight:700}.markdown h3,.markdown h4,.markdown h5,.markdown h6{font-size:1.25rem;margin-top:1.5rem;margin-bottom:1.5rem;font-weight:600;color:#fff}.markdown a{color:#9f7aea}.markdown a:hover{text-decoration:underline}.markdown p{margin-bottom:1rem}.markdown ol,.markdown ul{margin-bottom:1rem;margin-left:2rem}.markdown li>ol,.markdown li>p,.markdown li>ul{margin-bottom:0}.markdown ol{list-style-type:decimal}.markdown ul{list-style-type:disc}.markdown blockquote{padding:.5rem 0 .5rem 1.5rem;margin-right:1.5rem;margin-bottom:1rem;border-left-width:4px;border-color:#cbd5e0}.markdown blockquote>p{margin-bottom:0}.markdown td,.markdown th{padding:.25rem .5rem;border-width:1px;border-color:#cbd5e0}.markdown tr:nth-child(odd){background-color:#f7fafc}.markdown table{margin-bottom:1.5rem}.markdown anchor{padding-top:1rem}@media (min-width:640px){.sm\:pr-20{padding-right:5rem}.sm\:pl-20{padding-left:5rem}}</style><meta name="generator" content="Gatsby 2.13.65"/><style type="text/css">.gatsby-resp-image-image{width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;color:transparent;}</style><style type="text/css">
    .anchor {
      float: left;
      padding-right: 4px;
      margin-left: -20px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var offset = element.offsetTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link rel="shortcut icon" href="/icons/icon-48x48.png?v=008654519ce705ac7bc44303a9014606"/><link rel="manifest" href="/manifest.webmanifest"/><meta name="theme-color" content="#663399"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=008654519ce705ac7bc44303a9014606"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=008654519ce705ac7bc44303a9014606"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=008654519ce705ac7bc44303a9014606"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=008654519ce705ac7bc44303a9014606"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=008654519ce705ac7bc44303a9014606"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=008654519ce705ac7bc44303a9014606"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=008654519ce705ac7bc44303a9014606"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=008654519ce705ac7bc44303a9014606"/><title data-react-helmet="true">Building High Performance Web Apps with Emotion and Next.js | Peter Piekarczyk</title><meta data-react-helmet="true" name="description" content="The homepage of Peter Piekarczyk"/><meta data-react-helmet="true" property="og:title" content="Building High Performance Web Apps with Emotion and Next.js"/><meta data-react-helmet="true" property="og:description" content="The homepage of Peter Piekarczyk"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="@peterpme"/><meta data-react-helmet="true" name="twitter:title" content="Building High Performance Web Apps with Emotion and Next.js"/><meta data-react-helmet="true" name="twitter:description" content="The homepage of Peter Piekarczyk"/><link as="script" rel="preload" href="/webpack-runtime-6532b6b1764ae3314947.js"/><link as="script" rel="preload" href="/app-a7d705b40d132e7476d0.js"/><link as="script" rel="preload" href="/styles-e85565c759bcefc8fc63.js"/><link as="script" rel="preload" href="/1-2f9f9af4507345056c2b.js"/><link as="script" rel="preload" href="/component---src-templates-blog-post-js-3fbb1da6bd3f09c40906.js"/><link as="fetch" rel="preload" href="/page-data/blog/draft_Building-High-Performance-Web-Apps-with-Emotion-and-Next-js-4a4c40af43d0/page-data.json" crossorigin="anonymous"/></head><body><noscript id="gatsby-noscript">This app works best with JavaScript enabled.</noscript><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group" id="gatsby-focus-wrapper"><div class="bg fixed right-0 top-0 bottom-0 w-3/5 h-screen bg-cover bg-no-repeat"></div><main class="z-10 p-fixed bg-purple-900 min-h-screen text-gray-500 leading-relaxed max-w-2xl px-6 sm:pr-20 sm:pl-20 py-6"><a rel="home" class="text-2xl" href="/blog">←</a><h1 class="text-3xl leading-tight text-gray-200 font-headline font-bold mb-3 pb-0">Building High Performance Web Apps with Emotion and Next.js</h1><section class="markdown"><p>If you haven’t heard of Emotion yet, it’s one of the fastest CSS-in-JS libraries to date. Its API is similar to styled-components but delivers your stylesheets over 200x faster. If you don’t believe me, check out @tkh44’s article here or the benchmarks you can run on your own here.</p>
<p>Under the hood, Emotion uses a babel plugin to parse your CSS and constructs style blocks from your components. It reads those blocks with PostCSS, manipulates them and writes template literals back with babel. It’s the reason why Emotion is so fast: it takes care of all the expensive operations like parsing nested rules and prefixes ahead of time.</p>
<p>When you combine an awesome server-rendered experience like Next.js with Emotion, you get a high performant website right out of the box.</p>
<h4 id="installation"><a href="#installation" aria-label="installation permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Installation</h4>
<p>The easiest way to get started is by using <code class="language-text">create-next-app</code> to generate a brand new project.</p>
<p><code class="language-text">create-next-app</code> takes the same approach <code class="language-text">create-react-app</code> does but it generates a Next.js project instead. It’ll install all the dependencies you need ahead of time and put together the base project.</p>
<p>Run the following to get yourself started with Next.js and Emotion:</p>
<ul>
<li><code class="language-text">yarn global add create-next-app</code> or <code class="language-text">npm install -g create-next-app</code></li>
<li><code class="language-text">create-next-app hackernews</code></li>
<li><code class="language-text">cd hackernews</code></li>
<li><code class="language-text">yarn add emotion</code> or <code class="language-text">npm install —-save emotion</code></li>
</ul>
<h4 id="yarn"><a href="#yarn" aria-label="yarn permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Yarn</h4>
<p><code class="language-text">yarn</code> is an alternative package manager to <code class="language-text">npm</code> that strives for high performance and security. You can read more about it at <a href="%5Bhttps://yarnpkg.com%5D(https://yarnpkg.com)">yarnpkg.com</a> or get started with it right away by running <code class="language-text">brew update &amp;&amp; brew install yarn</code> in your terminal.</p>
<h4 id="configuration"><a href="#configuration" aria-label="configuration permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Configuration</h4>
<p>For Next.js and other server-rendered libraries, Emotion requires an additional step of adding an <code class="language-text">inline-mode</code> configuration to your babelrc. If you were using <code class="language-text">create-react-app</code> or a single page app with no server rendering, you could skip this step.</p>
<h4 id="extract-vs-inline-mode"><a href="#extract-vs-inline-mode" aria-label="extract vs inline mode permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Extract vs. Inline Mode</h4>
<p>Extract is how Emotion works out of the box. It’s the “high perf” setting if you’re not worried about IE11 or below and aren’t doing any server rendering. The reason why its faster is because it skips the prefixing step older browsers require.</p>
<p>Inline Mode is the “safety net” setting that is just a smidge slower but supports every browser React does and supports server rendering. If you’re developing for a wide audience of people and browsers, this is the mode you want to go with.</p>
<h4 id="getting-started"><a href="#getting-started" aria-label="getting started permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Getting Started</h4>
<p>Emotion supports almost every technique and API you’ve loved when it comes to CSS-in-JS libraries including raw CSS files. It makes porting your project over from virtually anything a breeze!</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> Avatar <span class="token operator">=</span> <span class="token function">styled</span><span class="token punctuation">(</span>‘img’<span class="token punctuation">)</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
 width: 100px;
 height: 100px;
</span><span class="token template-punctuation string">`</span></span></code></pre></div>
<h4 id="final-thoughts"><a href="#final-thoughts" aria-label="final thoughts permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Final Thoughts</h4>
<p>I love Emotion because it supports a lot of the same features I was looking for when comparing different CSS-in-JSS libraries except offering incredible performance we all strive to achieve.</p></section><span class="block mt-4">Published on <!-- -->Invalid date</span><small><a target="_blank" rel="nofollow noopener noreferrer" href="https://twitter.com/search?q=https://peterp.me/blog/draft_Building-High-Performance-Web-Apps-with-Emotion-and-Next-js-4a4c40af43d0/">Discuss on Twitter</a> <!-- -->·<!-- --> <a target="_blank" rel="nofollow noopener noreferrer" href="https://github.com/peterpme/peterpme.github.io/tree/master/content/blogblog/draft_Building-High-Performance-Web-Apps-with-Emotion-and-Next-js-4a4c40af43d0/">Edit this post on GitHub</a></small><nav class="mt-4"><ul class="text-white list-none p-0"><li></li><li><a rel="next" href="/blog/draft_Becoming-a-better-developer-bf4d87335419/">→ <!-- -->Becoming a better developer</a></li></ul></nav></main></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/blog/draft_Building-High-Performance-Web-Apps-with-Emotion-and-Next-js-4a4c40af43d0/";window.webpackCompilationHash="f146ed55f93bb0a77a00";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-a7d705b40d132e7476d0.js"],"component---node-modules-gatsby-plugin-offline-app-shell-js":["/component---node-modules-gatsby-plugin-offline-app-shell-js-5c6e01d279d05be4933e.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js-3fbb1da6bd3f09c40906.js"],"component---src-pages-404-js":["/component---src-pages-404-js-0908760328088e48c994.js"],"component---src-pages-blog-js":["/component---src-pages-blog-js-c1e22acb6a9ee307ad9b.js"],"component---src-pages-index-js":["/component---src-pages-index-js-b6fdf017023ca33a8c11.js"]};/*]]>*/</script><script src="/component---src-templates-blog-post-js-3fbb1da6bd3f09c40906.js" async=""></script><script src="/1-2f9f9af4507345056c2b.js" async=""></script><script src="/styles-e85565c759bcefc8fc63.js" async=""></script><script src="/app-a7d705b40d132e7476d0.js" async=""></script><script src="/webpack-runtime-6532b6b1764ae3314947.js" async=""></script></body></html>